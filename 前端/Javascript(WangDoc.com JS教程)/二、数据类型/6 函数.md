# 函数

## 1. 概述

### 1.1 函数的声明

有三种声明函数的方法

1. function

   ```js
   function print(s) {
     console.log(s);
   }
   ```

   这叫做函数的声明（Function Declaration）

2. 函数表达式

   还可以采用变量赋值的写法

   ```js
   var print = function(s) {
     console.log(s);
   };
   ```

   采用函数表达式声明函数时，`function`命令后面不带有函数名。如果加上函数名，该函数名只在函数体内部有效，在函数体外部无效

   ```js
   var print = function x(){
     console.log(typeof x);
   };
   
   x
   // ReferenceError: x is not defined
   
   print()
   // function
   ```

   这个`x`只在函数体内部可用，指代函数表达式本身，其他地方都不可用

   这种写法的用处有两个

   + 一是可以在函数体内部调用自身
   + 二是方便除错（除错工具显示函数调用栈时，将显示函数名，而不再显示这里是一个匿名函数）

   因此，下面的形式声明函数也非常常见：

   ```js
   var f = function f() {};
   ```

3. Function构造函数

   ```js
   var add = new Function(
     'x',
     'y',
     'return x + y'
   );
   
   // 等同于
   function add(x, y) {
     return x + y;
   }
   ```

   `Function`构造函数接受三个参数，除了最后一个参数是`add`函数的“函数体”，其他参数都是`add`函数的参数

   可以传递任意数量的参数给`Function`构造函数，只有最后一个参数会被当做函数体，如果只有一个参数，该参数就是函数体

   > [!Warning]
   >
   > 非常不直观，几乎无人使用

### 1.2 函数的重复声明

如果同一个函数被多次声明，后面的声明就会覆盖前面的声明，而且，由于函数名的提升（参见下文），前一次声明在任何时候都是无效的

### 1.3 圆括号运算符，return 语句和递归

调用函数时，要使用圆括号运算符。圆括号之中，可以加入函数的参数，函数名后面紧跟一对圆括号，就会调用这个函数

函数体内部的`return`语句，表示返回

`return`语句不是必需的，如果没有的话，该函数就不返回任何值，或者说返回`undefined`

函数可以调用自身，这就是递归（recursion）。下面就是通过递归，计算斐波那契数列的代码

```js
function fib(num) {
  if (num === 0) return 0;
  if (num === 1) return 1;
  return fib(num - 2) + fib(num - 1);
}

fib(6) // 8
```

上面代码中，`fib`函数内部又调用了`fib`，计算得到斐波那契数列的第6个元素是8